{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nconst API_URL = 'http://localhost:3000/restaurants';\nexport const productsService = {\n  async getProductsByRestaurant(restaurantName) {\n    console.log(restaurantName.products);\n    try {\n      const response = await axios.get(API_URL);\n      const restaurant = response.data.find(restaurant => restaurant['business-name'] === restaurantName);\n      if (restaurant) {\n        return restaurant.products || []; // Inicializa como arreglo si no existe\n      } else {\n        throw new Error('Restaurant not found');\n      }\n    } catch (error) {\n      console.error(\"Error fetching products: \", error);\n      throw error;\n    }\n  },\n  async addProduct(restaurantName, product) {\n    try {\n      const response = await axios.get(API_URL);\n      const restaurant = response.data.find(r => r['business-name'] === restaurantName);\n      if (restaurant) {\n        const lastProduct = restaurant.products[restaurant.products.length - 1];\n        const newId = lastProduct ? lastProduct.id + 1 : 1;\n        product.id = newId;\n        restaurant.products.push(product);\n        await axios.put(`${API_URL}/${restaurant.id}`, restaurant);\n\n        // Devolver respuesta con éxito\n        return {\n          success: true,\n          message: \"Product created successfully\"\n        };\n      }\n    } catch (error) {\n      console.error(\"Error adding product: \", error);\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  },\n  async updateProduct(restaurantName, product) {\n    try {\n      const response = await axios.get(API_URL);\n      const restaurant = response.data.find(r => r['business-name'] === restaurantName);\n      if (restaurant) {\n        const index = restaurant.products.findIndex(p => p.id === product.id);\n        if (index !== -1) {\n          restaurant.products.splice(index, 1, product);\n          await axios.put(`${API_URL}/${restaurant.id}`, restaurant);\n\n          // Devolver respuesta con éxito\n          return {\n            success: true,\n            message: \"Product updated successfully\"\n          };\n        } else {\n          return {\n            success: false,\n            message: \"Product not found\"\n          };\n        }\n      }\n    } catch (error) {\n      console.error(\"Error updating product: \", error);\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  },\n  async deleteProduct(restaurantName, productId) {\n    try {\n      const response = await axios.get(API_URL);\n      const restaurant = response.data.find(r => r['business-name'] === restaurantName);\n      if (restaurant) {\n        const index = restaurant.products.findIndex(p => p.id === productId);\n        if (index !== -1) {\n          restaurant.products.splice(index, 1);\n          await axios.put(`${API_URL}/${restaurant.id}`, restaurant);\n\n          // Devolver respuesta con éxito\n          return {\n            success: true,\n            message: \"Product deleted successfully\"\n          };\n        } else {\n          return {\n            success: false,\n            message: \"Product not found\"\n          };\n        }\n      } else {\n        return {\n          success: false,\n          message: \"Restaurant not found\"\n        };\n      }\n    } catch (error) {\n      console.error(\"Error deleting product: \", error);\n      return {\n        success: false,\n        message: error.message\n      };\n    }\n  }\n};","map":{"version":3,"names":["axios","API_URL","productsService","getProductsByRestaurant","restaurantName","console","log","products","response","get","restaurant","data","find","Error","error","addProduct","product","r","lastProduct","length","newId","id","push","put","success","message","updateProduct","index","findIndex","p","splice","deleteProduct","productId"],"sources":["E:/kitchen-tech-repo/src/public/services/productsService.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_URL = 'http://localhost:3000/restaurants';\r\n\r\nexport const productsService = {\r\n    async getProductsByRestaurant(restaurantName) {\r\n        console.log(restaurantName.products);\r\n        try {\r\n            const response = await axios.get(API_URL);\r\n            const restaurant = response.data.find(restaurant => restaurant['business-name'] === restaurantName);\r\n            if (restaurant) {\r\n                return restaurant.products || [];  // Inicializa como arreglo si no existe\r\n            } else {\r\n                throw new Error('Restaurant not found');\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching products: \", error);\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    async addProduct(restaurantName, product) {\r\n        try {\r\n            const response = await axios.get(API_URL);\r\n            const restaurant = response.data.find(r => r['business-name'] === restaurantName);\r\n\r\n            if (restaurant) {\r\n                const lastProduct = restaurant.products[restaurant.products.length - 1];\r\n                const newId = lastProduct ? lastProduct.id + 1 : 1;\r\n                product.id = newId;\r\n\r\n                restaurant.products.push(product);\r\n                await axios.put(`${API_URL}/${restaurant.id}`, restaurant);\r\n\r\n                // Devolver respuesta con éxito\r\n                return { success: true, message: \"Product created successfully\" };\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error adding product: \", error);\r\n            return { success: false, message: error.message };\r\n        }\r\n    },\r\n\r\n    async updateProduct(restaurantName, product) {\r\n        try {\r\n            const response = await axios.get(API_URL);\r\n            const restaurant = response.data.find(r => r['business-name'] === restaurantName);\r\n\r\n            if (restaurant) {\r\n                const index = restaurant.products.findIndex(p => p.id === product.id);\r\n\r\n                if (index !== -1) {\r\n                    restaurant.products.splice(index, 1, product);\r\n                    await axios.put(`${API_URL}/${restaurant.id}`, restaurant);\r\n\r\n                    // Devolver respuesta con éxito\r\n                    return { success: true, message: \"Product updated successfully\" };\r\n                } else {\r\n                    return { success: false, message: \"Product not found\" };\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error updating product: \", error);\r\n            return { success: false, message: error.message };\r\n        }\r\n    },\r\n\r\n    async deleteProduct(restaurantName, productId) {\r\n        try {\r\n            const response = await axios.get(API_URL);\r\n            const restaurant = response.data.find(r => r['business-name'] === restaurantName);\r\n\r\n            if (restaurant) {\r\n                const index = restaurant.products.findIndex(p => p.id === productId);\r\n\r\n                if (index !== -1) {\r\n                    restaurant.products.splice(index, 1);\r\n                    await axios.put(`${API_URL}/${restaurant.id}`, restaurant);\r\n\r\n                    // Devolver respuesta con éxito\r\n                    return { success: true, message: \"Product deleted successfully\" };\r\n                } else {\r\n                    return { success: false, message: \"Product not found\" };\r\n                }\r\n            } else {\r\n                return { success: false, message: \"Restaurant not found\" };\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error deleting product: \", error);\r\n            return { success: false, message: error.message };\r\n        }\r\n    }\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,mCAAmC;AAEnD,OAAO,MAAMC,eAAe,GAAG;EAC3B,MAAMC,uBAAuBA,CAACC,cAAc,EAAE;IAC1CC,OAAO,CAACC,GAAG,CAACF,cAAc,CAACG,QAAQ,CAAC;IACpC,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAACR,OAAO,CAAC;MACzC,MAAMS,UAAU,GAAGF,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACF,UAAU,IAAIA,UAAU,CAAC,eAAe,CAAC,KAAKN,cAAc,CAAC;MACnG,IAAIM,UAAU,EAAE;QACZ,OAAOA,UAAU,CAACH,QAAQ,IAAI,EAAE,CAAC,CAAE;MACvC,CAAC,MAAM;QACH,MAAM,IAAIM,KAAK,CAAC,sBAAsB,CAAC;MAC3C;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZT,OAAO,CAACS,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,MAAMA,KAAK;IACf;EACJ,CAAC;EAED,MAAMC,UAAUA,CAACX,cAAc,EAAEY,OAAO,EAAE;IACtC,IAAI;MACA,MAAMR,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAACR,OAAO,CAAC;MACzC,MAAMS,UAAU,GAAGF,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACK,CAAC,IAAIA,CAAC,CAAC,eAAe,CAAC,KAAKb,cAAc,CAAC;MAEjF,IAAIM,UAAU,EAAE;QACZ,MAAMQ,WAAW,GAAGR,UAAU,CAACH,QAAQ,CAACG,UAAU,CAACH,QAAQ,CAACY,MAAM,GAAG,CAAC,CAAC;QACvE,MAAMC,KAAK,GAAGF,WAAW,GAAGA,WAAW,CAACG,EAAE,GAAG,CAAC,GAAG,CAAC;QAClDL,OAAO,CAACK,EAAE,GAAGD,KAAK;QAElBV,UAAU,CAACH,QAAQ,CAACe,IAAI,CAACN,OAAO,CAAC;QACjC,MAAMhB,KAAK,CAACuB,GAAG,CAAC,GAAGtB,OAAO,IAAIS,UAAU,CAACW,EAAE,EAAE,EAAEX,UAAU,CAAC;;QAE1D;QACA,OAAO;UAAEc,OAAO,EAAE,IAAI;UAAEC,OAAO,EAAE;QAA+B,CAAC;MACrE;IACJ,CAAC,CAAC,OAAOX,KAAK,EAAE;MACZT,OAAO,CAACS,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,OAAO;QAAEU,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAEX,KAAK,CAACW;MAAQ,CAAC;IACrD;EACJ,CAAC;EAED,MAAMC,aAAaA,CAACtB,cAAc,EAAEY,OAAO,EAAE;IACzC,IAAI;MACA,MAAMR,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAACR,OAAO,CAAC;MACzC,MAAMS,UAAU,GAAGF,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACK,CAAC,IAAIA,CAAC,CAAC,eAAe,CAAC,KAAKb,cAAc,CAAC;MAEjF,IAAIM,UAAU,EAAE;QACZ,MAAMiB,KAAK,GAAGjB,UAAU,CAACH,QAAQ,CAACqB,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACR,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC;QAErE,IAAIM,KAAK,KAAK,CAAC,CAAC,EAAE;UACdjB,UAAU,CAACH,QAAQ,CAACuB,MAAM,CAACH,KAAK,EAAE,CAAC,EAAEX,OAAO,CAAC;UAC7C,MAAMhB,KAAK,CAACuB,GAAG,CAAC,GAAGtB,OAAO,IAAIS,UAAU,CAACW,EAAE,EAAE,EAAEX,UAAU,CAAC;;UAE1D;UACA,OAAO;YAAEc,OAAO,EAAE,IAAI;YAAEC,OAAO,EAAE;UAA+B,CAAC;QACrE,CAAC,MAAM;UACH,OAAO;YAAED,OAAO,EAAE,KAAK;YAAEC,OAAO,EAAE;UAAoB,CAAC;QAC3D;MACJ;IACJ,CAAC,CAAC,OAAOX,KAAK,EAAE;MACZT,OAAO,CAACS,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,OAAO;QAAEU,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAEX,KAAK,CAACW;MAAQ,CAAC;IACrD;EACJ,CAAC;EAED,MAAMM,aAAaA,CAAC3B,cAAc,EAAE4B,SAAS,EAAE;IAC3C,IAAI;MACA,MAAMxB,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAACR,OAAO,CAAC;MACzC,MAAMS,UAAU,GAAGF,QAAQ,CAACG,IAAI,CAACC,IAAI,CAACK,CAAC,IAAIA,CAAC,CAAC,eAAe,CAAC,KAAKb,cAAc,CAAC;MAEjF,IAAIM,UAAU,EAAE;QACZ,MAAMiB,KAAK,GAAGjB,UAAU,CAACH,QAAQ,CAACqB,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACR,EAAE,KAAKW,SAAS,CAAC;QAEpE,IAAIL,KAAK,KAAK,CAAC,CAAC,EAAE;UACdjB,UAAU,CAACH,QAAQ,CAACuB,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;UACpC,MAAM3B,KAAK,CAACuB,GAAG,CAAC,GAAGtB,OAAO,IAAIS,UAAU,CAACW,EAAE,EAAE,EAAEX,UAAU,CAAC;;UAE1D;UACA,OAAO;YAAEc,OAAO,EAAE,IAAI;YAAEC,OAAO,EAAE;UAA+B,CAAC;QACrE,CAAC,MAAM;UACH,OAAO;YAAED,OAAO,EAAE,KAAK;YAAEC,OAAO,EAAE;UAAoB,CAAC;QAC3D;MACJ,CAAC,MAAM;QACH,OAAO;UAAED,OAAO,EAAE,KAAK;UAAEC,OAAO,EAAE;QAAuB,CAAC;MAC9D;IACJ,CAAC,CAAC,OAAOX,KAAK,EAAE;MACZT,OAAO,CAACS,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,OAAO;QAAEU,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAEX,KAAK,CAACW;MAAQ,CAAC;IACrD;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}