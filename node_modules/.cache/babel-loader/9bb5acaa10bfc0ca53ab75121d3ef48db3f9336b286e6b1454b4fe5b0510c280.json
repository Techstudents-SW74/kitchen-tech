{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"layout\"\n};\nconst _hoisted_2 = {\n  class: \"main-content\"\n};\nconst _hoisted_3 = {\n  class: \"page-container\"\n};\nconst _hoisted_4 = {\n  class: \"tables-container\"\n};\nconst _hoisted_5 = {\n  class: \"left-section\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"no-accounts\"\n};\nconst _hoisted_7 = {\n  class: \"right-section\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_sidebar_component = _resolveComponent(\"sidebar-component\");\n  const _component_header_component = _resolveComponent(\"header-component\");\n  const _component_searchbar_component = _resolveComponent(\"searchbar-component\");\n  const _component_TableConfigComponent = _resolveComponent(\"TableConfigComponent\");\n  const _component_TablesComponent = _resolveComponent(\"TablesComponent\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_sidebar_component, {\n    \"restaurant-name\": $data.restaurantName,\n    role: $data.userRole,\n    class: \"sidebar\"\n  }, null, 8 /* PROPS */, [\"restaurant-name\", \"role\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_header_component, {\n    \"restaurant-name\": $data.restaurantName,\n    role: $data.userRole,\n    class: \"header\"\n  }, null, 8 /* PROPS */, [\"restaurant-name\", \"role\"]), _createElementVNode(\"div\", _hoisted_3, [$data.restaurantName ? (_openBlock(), _createBlock(_component_searchbar_component, {\n    key: 0,\n    \"restaurant-name\": $data.restaurantName,\n    \"user-role\": $data.userRole\n  }, null, 8 /* PROPS */, [\"restaurant-name\", \"user-role\"])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_TableConfigComponent, {\n    \"is-visible\": $data.showModal,\n    onAddTable: $options.addTable,\n    onCloseModal: $options.closeModal\n  }, null, 8 /* PROPS */, [\"is-visible\", \"onAddTable\", \"onCloseModal\"]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [$data.tables.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[1] || (_cache[1] = [_createElementVNode(\"label\", null, \"You don't have created any table yet.\", -1 /* HOISTED */)]))) : $data.tables.length !== 0 ? (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 1\n  }, _renderList($data.tables, table => {\n    return _openBlock(), _createBlock(_component_TablesComponent, {\n      key: table.id,\n      table: table,\n      onDeleteAccount: $options.deleteTable\n    }, null, 8 /* PROPS */, [\"table\", \"onDeleteAccount\"]);\n  }), 128 /* KEYED_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    class: \"button\",\n    onClick: _cache[0] || (_cache[0] = $event => $data.showModal = true)\n  }, \"Add Table\"), _cache[2] || (_cache[2] = _createElementVNode(\"button\", {\n    class: \"button\"\n  }, \"Edit Table\", -1 /* HOISTED */)), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    class: \"button\"\n  }, \"Delete Table\", -1 /* HOISTED */))])])])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_sidebar_component","$data","restaurantName","role","userRole","_createElementVNode","_hoisted_2","_component_header_component","_hoisted_3","_createBlock","_component_searchbar_component","_createCommentVNode","_component_TableConfigComponent","showModal","onAddTable","$options","addTable","onCloseModal","closeModal","_hoisted_4","_hoisted_5","tables","length","_hoisted_6","_cache","_Fragment","_renderList","table","_component_TablesComponent","id","onDeleteAccount","deleteTable","_hoisted_7","onClick","$event"],"sources":["E:\\kitchen-tech-repo\\src\\admins\\views\\saved-accounts-views\\tables-page.vue"],"sourcesContent":["<template>\r\n  <div class=\"layout\">\r\n    <sidebar-component :restaurant-name=\"restaurantName\" :role=\"userRole\" class=\"sidebar\" />\r\n    <div class=\"main-content\">\r\n      <header-component :restaurant-name=\"restaurantName\" :role=\"userRole\" class=\"header\" />\r\n      <div class=\"page-container\">\r\n        <searchbar-component\r\n            v-if=\"restaurantName\"\r\n            :restaurant-name=\"restaurantName\"\r\n            :user-role=\"userRole\"\r\n        />\r\n        <TableConfigComponent\r\n            :is-visible=\"showModal\"\r\n            @add-table=\"addTable\"\r\n            @close-modal=\"closeModal\"\r\n        />\r\n        <div class=\"tables-container\">\r\n          <div class=\"left-section\">\r\n            <template v-if=\"tables.length === 0\">\r\n              <div class=\"no-accounts\">\r\n                <label>You don't have created any table yet.</label>\r\n              </div>\r\n            </template>\r\n            <template v-else-if=\"tables.length !== 0\">\r\n              <TablesComponent\r\n                  v-for=\"table in tables\"\r\n                  :key=\"table.id\"\r\n                  :table=\"table\"\r\n                  @delete-account=\"deleteTable\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div class=\"right-section\">\r\n            <button class=\"button\" @click=\"showModal = true \">Add Table</button>\r\n            <button class=\"button\">Edit Table</button>\r\n            <button class=\"button\">Delete Table</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderComponent from \"@/admins/components/header-component.vue\";\r\nimport SidebarComponent from \"@/admins/components/sidebar-component.vue\";\r\nimport userService from \"@/public/services/userService\";\r\nimport SearchbarComponent from \"@/admins/views/saved-accounts-views/components/searchbar-component.vue\";\r\nimport TablesComponent from \"@/admins/views/saved-accounts-views/components/tables-component.vue\";\r\nimport TableConfigComponent from \"@/admins/views/saved-accounts-views/components/table-config-component.vue\";\r\nimport {tablesService} from \"@/public/services/tablesService\";\r\n\r\nexport default {\r\n  components: {\r\n    TablesComponent,\r\n    SearchbarComponent,\r\n    HeaderComponent,\r\n    SidebarComponent,\r\n    TableConfigComponent\r\n  },\r\n  data() {\r\n    return {\r\n      restaurantName: '',\r\n      userRole: '',\r\n      tables: [],\r\n      showModal: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchUserData();\r\n\r\n    const userData = JSON.parse(localStorage.getItem('userData'));\r\n    if (userData) {\r\n      this.restaurantName = userData['business-name'];\r\n      this.userRole = userData.role;\r\n      this.restaurantId = localStorage.getItem('restaurantId'); // Obtener el ID del restaurante de localStorage\r\n    }\r\n\r\n    this.loadTables();\r\n  },\r\n  methods: {\r\n    async fetchUserData() {\r\n      try {\r\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n        const restaurantId = userData?.restaurantId;\r\n\r\n        if (restaurantId) {\r\n          const restaurantData = await userService.getRestaurantById(restaurantId);\r\n          this.restaurantName = restaurantData.name;\r\n          this.userRole = userData.role;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching restaurant data: \", error);\r\n      }\r\n    },\r\n    async loadTables() {\r\n      const userData = JSON.parse(localStorage.getItem('userData'));\r\n      const restaurantId = userData.restaurantId;\r\n\r\n      try {\r\n        const tables = await tablesService.getTablesByRestaurant(restaurantId);\r\n        this.tables = tables;\r\n      } catch (error) {\r\n        console.error(\"Failed to load tables\");\r\n      }\r\n    },\r\n    async deleteTable(tableId) {\r\n      if(confirm(\"Are you sure you want to delete this table?\")) {\r\n        try {\r\n          const response = await tablesService.deleteTable(tableId);\r\n          console.log(response)\r\n          await this.loadTables();\r\n        } catch (error){\r\n          console.error('Error during table deletion process:', error);\r\n        }\r\n      } else {\r\n        console.log(\"Deletion canceled.\");\r\n      }\r\n    },\r\n    async addTable(tableData) {\r\n      try {\r\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n        const restaurantId = userData?.restaurantId;\r\n\r\n        const table = {\r\n          tableNumber: tableData.tableNumber,\r\n          tableCapacity: tableData.tableCapacity,\r\n          tableGuests: 0,\r\n          tableStatus: 0,\r\n          restaurantId: restaurantId,\r\n        };\r\n        const response = await tablesService.addTable(table);\r\n        if (response) {\r\n          await this.loadTables();\r\n        } else {\r\n          console.error(\"Failed to add table\");\r\n        }\r\n      }catch (error) {\r\n        console.error(\"Failed to add table\", error);\r\n      }\r\n    },\r\n    closeModal(){\r\n      this.showModal = false;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.layout {\r\n  display: flex;\r\n  height: 100vh;\r\n  background-color: #F6F5FA;\r\n}\r\n.main-content {\r\n  margin-left: 255px;\r\n  width: calc(100% - 280px);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.page-container {\r\n  margin-top: 70px;\r\n  padding: 20px;\r\n  background-color: #F6F5FA;\r\n  height: calc(100vh - 100px);\r\n  font-family: 'Red Hat Display', sans-serif;\r\n}\r\n\r\n.tables-container{\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin: auto;\r\n  justify-content: center;\r\n}\r\n.left-section {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  max-height: 100px;\r\n  margin: 20px 10px;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\r\n}\r\n\r\n.right-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 25px 10px;\r\n  min-width: 100px;\r\n  min-height: 690px;\r\n}\r\n.button {\r\n  background-color: #D3D2E5;\r\n  color: #31304A;\r\n  border: none;\r\n  margin: 5px;\r\n  padding: 10px;\r\n  max-width: 120px;\r\n  font-weight: 800;\r\n  border-radius: 5px;\r\n}\r\n.button:hover {\r\n  background-color: #31304A;\r\n  color: #F6F5FA;\r\n  transition: 0.3s;\r\n  cursor: pointer;\r\n}\r\n.button:active{\r\n  background-color: #201E35;\r\n  color: #F6F5FA;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAQ;;EAEZA,KAAK,EAAC;AAAc;;EAElBA,KAAK,EAAC;AAAgB;;EAWpBA,KAAK,EAAC;AAAkB;;EACtBA,KAAK,EAAC;AAAc;;EAjBnCC,GAAA;EAmBmBD,KAAK,EAAC;;;EAaVA,KAAK,EAAC;AAAe;;;;;;;uBA/BlCE,mBAAA,CAuCM,OAvCNC,UAuCM,GAtCJC,YAAA,CAAwFC,4BAAA;IAApE,iBAAe,EAAEC,KAAA,CAAAC,cAAc;IAAGC,IAAI,EAAEF,KAAA,CAAAG,QAAQ;IAAET,KAAK,EAAC;wDAC5EU,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJP,YAAA,CAAsFQ,2BAAA;IAAnE,iBAAe,EAAEN,KAAA,CAAAC,cAAc;IAAGC,IAAI,EAAEF,KAAA,CAAAG,QAAQ;IAAET,KAAK,EAAC;wDAC3EU,mBAAA,CAiCM,OAjCNG,UAiCM,GA/BMP,KAAA,CAAAC,cAAc,I,cADxBO,YAAA,CAIEC,8BAAA;IAVVd,GAAA;IAQa,iBAAe,EAAEK,KAAA,CAAAC,cAAc;IAC/B,WAAS,EAAED,KAAA,CAAAG;+DATxBO,mBAAA,gBAWQZ,YAAA,CAIEa,+BAAA;IAHG,YAAU,EAAEX,KAAA,CAAAY,SAAS;IACrBC,UAAS,EAAEC,QAAA,CAAAC,QAAQ;IACnBC,YAAW,EAAEF,QAAA,CAAAG;yEAElBb,mBAAA,CAqBM,OArBNc,UAqBM,GApBJd,mBAAA,CAcM,OAdNe,UAcM,GAbYnB,KAAA,CAAAoB,MAAM,CAACC,MAAM,U,cAC3BzB,mBAAA,CAEM,OAFN0B,UAEM,EAAAC,MAAA,QAAAA,MAAA,OADJnB,mBAAA,CAAoD,eAA7C,uCAAqC,oB,MAG3BJ,KAAA,CAAAoB,MAAM,CAACC,MAAM,U,kBAChCzB,mBAAA,CAKE4B,SAAA;IA7BhB7B,GAAA;EAAA,GAAA8B,WAAA,CAyBkCzB,KAAA,CAAAoB,MAAM,EAAfM,KAAK;yBADhBlB,YAAA,CAKEmB,0BAAA;MAHGhC,GAAG,EAAE+B,KAAK,CAACE,EAAE;MACbF,KAAK,EAAEA,KAAK;MACZG,eAAc,EAAEf,QAAA,CAAAgB;;mCA5BnCpB,mBAAA,e,GAgCUN,mBAAA,CAIM,OAJN2B,UAIM,GAHJ3B,mBAAA,CAAoE;IAA5DV,KAAK,EAAC,QAAQ;IAAEsC,OAAK,EAAAT,MAAA,QAAAA,MAAA,MAAAU,MAAA,IAAEjC,KAAA,CAAAY,SAAS;KAAU,WAAS,G,0BAC3DR,mBAAA,CAA0C;IAAlCV,KAAK,EAAC;EAAQ,GAAC,YAAU,sB,0BACjCU,mBAAA,CAA4C;IAApCV,KAAK,EAAC;EAAQ,GAAC,cAAY,qB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}