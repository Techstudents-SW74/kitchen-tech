{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport HeaderComponent from \"@/admins/components/header-component.vue\";\nimport SidebarComponent from \"@/admins/components/sidebar-component.vue\";\nimport ProductGridComponent from \"@/admins/views/cassing-views/components/product-grid-component.vue\";\nimport CartSummaryComponent from \"@/admins/views/cassing-views/components/cart-summary-component.vue\";\nimport FavoriteProductHeaderComponent from \"@/admins/views/cassing-views/components/favorite-product-header.vue\";\nimport userService from \"@/public/services/userService\";\nimport { productsService } from \"@/public/services/productsService\";\nexport default {\n  components: {\n    FavoriteProductHeaderComponent,\n    HeaderComponent,\n    SidebarComponent,\n    ProductGridComponent,\n    CartSummaryComponent\n  },\n  props: {\n    cartData: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      restaurantName: '',\n      userRole: '',\n      cart: [],\n      subtotal: 0,\n      igv: 0,\n      total: 0,\n      isEditMode: false,\n      selectedSlot: null,\n      favoriteProducts: Array(30).fill(null),\n      restaurantId: null\n    };\n  },\n  created() {\n    this.fetchUserData();\n    this.loadProducts();\n    this.loadCart();\n  },\n  methods: {\n    loadCart() {\n      this.cart = JSON.parse(localStorage.getItem('cartData')) || [];\n    },\n    async fetchUserData() {\n      try {\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\n        const restaurantId = userData?.restaurantId;\n        if (restaurantId) {\n          const restaurantData = await userService.getRestaurantById(restaurantId);\n          this.restaurantName = restaurantData.name;\n          this.userRole = userData.role;\n          this.restaurantId = restaurantId;\n        }\n      } catch (error) {\n        console.error(\"Error fetching restaurant data: \", error);\n      }\n    },\n    async loadProducts() {\n      const userData = JSON.parse(localStorage.getItem(\"userData\"));\n      console.log(userData);\n      const restaurantId = userData?.restaurantId;\n      if (!restaurantId) {\n        console.error(\"No restaurant ID found in userData\");\n        return; // Exit if there's no restaurantId\n      }\n      try {\n        const products = await productsService.getProductsByRestaurant(restaurantId);\n        this.favoriteProducts = products;\n        console.log(this.favoriteProducts);\n      } catch (error) {\n        console.error(\"Failed to load products\", error);\n      }\n    },\n    toggleEditMode() {\n      this.isEditMode = !this.isEditMode;\n    },\n    openProductList(index) {\n      this.selectedSlot = index;\n    },\n    addToSlot({\n      product,\n      slot\n    }) {\n      this.favoriteProducts[slot] = product;\n    },\n    removeProductFromFavorites(index) {\n      this.favoriteProducts[index] = null;\n    },\n    addCustomer() {\n      // Lógica para agregar un cliente\n    },\n    addProductToCart(product) {\n      const existingItem = this.cart.find(item => item.id === product.id);\n      if (existingItem) {\n        existingItem.quantity += 1;\n      } else {\n        this.cart.push({\n          ...product,\n          price: product.productPrice,\n          quantity: 1\n        });\n      }\n      this.updateCartSummary();\n    },\n    updateCartSummary() {\n      console.log(this.cart);\n      this.subtotal = this.cart.reduce((acc, item) => acc + item.price * item.quantity, 0);\n      this.igv = this.subtotal * 0.18; // Calcular IGV (18%)\n      this.total = this.subtotal;\n    },\n    handleUpdateCart(updatedCart) {\n      this.cart = updatedCart;\n      console.log(\"Updated cart recibirdo:\", updatedCart);\n    },\n    handleUpdateSummary({\n      subtotal,\n      igv,\n      total\n    }) {\n      this.subtotal = subtotal;\n      this.igv = igv;\n      this.total = total;\n    },\n    handleAccountUpdated() {},\n    charge() {\n      // Lógica para procesar el cobro\n    }\n  }\n};","map":{"version":3,"names":["HeaderComponent","SidebarComponent","ProductGridComponent","CartSummaryComponent","FavoriteProductHeaderComponent","userService","productsService","components","props","cartData","type","Array","default","data","restaurantName","userRole","cart","subtotal","igv","total","isEditMode","selectedSlot","favoriteProducts","fill","restaurantId","created","fetchUserData","loadProducts","loadCart","methods","JSON","parse","localStorage","getItem","userData","restaurantData","getRestaurantById","name","role","error","console","log","products","getProductsByRestaurant","toggleEditMode","openProductList","index","addToSlot","product","slot","removeProductFromFavorites","addCustomer","addProductToCart","existingItem","find","item","id","quantity","push","price","productPrice","updateCartSummary","reduce","acc","handleUpdateCart","updatedCart","handleUpdateSummary","handleAccountUpdated","charge"],"sources":["E:\\kitchen-tech-repo\\src\\admins\\views\\cassing-views\\casing-page.vue"],"sourcesContent":["<template>\r\n  <div class=\"layout\">\r\n    <sidebar-component :restaurant-name=\"restaurantName\" :role=\"userRole\" class=\"sidebar\" />\r\n    <div class=\"main-content\">\r\n      <header-component :restaurant-name=\"restaurantName\" :role=\"userRole\" class=\"header\" />\r\n      <div class=\"page-container\">\r\n        <div class=\"left-section\">\r\n          <favorite-product-header-component\r\n              v-if=\"restaurantName\"\r\n              :is-edit-mode=\"isEditMode\"\r\n              :restaurant-name=\"restaurantName\"\r\n              :selected-slot=\"selectedSlot\"\r\n              :cart=\"cart\"\r\n              @toggle-edit-mode=\"toggleEditMode\"\r\n              @add-to-slot=\"addToSlot\"\r\n              @add-to-cart=\"addProductToCart\"\r\n          />\r\n          <product-grid-component\r\n              :favorite-products=\"favoriteProducts\"\r\n              :is-edit-mode=\"isEditMode\"\r\n              @open-product-list=\"openProductList\"\r\n              @remove-product-from-favorites=\"removeProductFromFavorites\"\r\n              @add-to-cart=\"addProductToCart\"\r\n\r\n          />\r\n        </div>\r\n        <div class=\"right-section\">\r\n          <cart-summary-component\r\n              :cart=\"cart\"\r\n              :subtotal=\"subtotal\"\r\n              :igv=\"igv\"\r\n              :total=\"total\"\r\n              :restaurant-id=\"restaurantId\"\r\n              @add-customer=\"addCustomer\"\r\n              @charge=\"charge\"\r\n              @update-cart=\"handleUpdateCart\"\r\n              @update-summary=\"handleUpdateSummary\"\r\n              @account-updated=\"handleAccountUpdated\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderComponent from \"@/admins/components/header-component.vue\";\r\nimport SidebarComponent from \"@/admins/components/sidebar-component.vue\";\r\nimport ProductGridComponent from \"@/admins/views/cassing-views/components/product-grid-component.vue\";\r\nimport CartSummaryComponent from \"@/admins/views/cassing-views/components/cart-summary-component.vue\";\r\nimport FavoriteProductHeaderComponent from \"@/admins/views/cassing-views/components/favorite-product-header.vue\";\r\nimport userService from \"@/public/services/userService\";\r\nimport { productsService }  from \"@/public/services/productsService\"\r\n\r\nexport default {\r\n  components: {\r\n    FavoriteProductHeaderComponent,\r\n    HeaderComponent,\r\n    SidebarComponent,\r\n    ProductGridComponent,\r\n    CartSummaryComponent\r\n  },\r\n  props: {\r\n    cartData: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      restaurantName: '',\r\n      userRole: '',\r\n      cart: [],\r\n      subtotal: 0,\r\n      igv: 0,\r\n      total: 0,\r\n      isEditMode: false,\r\n      selectedSlot: null,\r\n      favoriteProducts: Array(30).fill(null),\r\n      restaurantId: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchUserData();\r\n    this.loadProducts();\r\n    this.loadCart();\r\n  },\r\n  methods: {\r\n    loadCart() {\r\n      this.cart = JSON.parse(localStorage.getItem('cartData')) || [];\r\n    },\r\n    async fetchUserData() {\r\n      try {\r\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n        const restaurantId = userData?.restaurantId;\r\n\r\n        if (restaurantId) {\r\n          const restaurantData = await userService.getRestaurantById(restaurantId);\r\n          this.restaurantName = restaurantData.name;\r\n          this.userRole = userData.role;\r\n          this.restaurantId = restaurantId;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching restaurant data: \", error);\r\n      }\r\n    },\r\n    async loadProducts() {\r\n      const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n      console.log(userData)\r\n      const restaurantId = userData?.restaurantId;\r\n      \r\n      if (!restaurantId) {\r\n        console.error(\"No restaurant ID found in userData\");\r\n        return; // Exit if there's no restaurantId\r\n      }\r\n\r\n      try {\r\n        const products = await productsService.getProductsByRestaurant(restaurantId);\r\n        this.favoriteProducts = products;\r\n        console.log(this.favoriteProducts);\r\n\r\n      } catch (error) {\r\n        console.error(\"Failed to load products\", error);\r\n      }\r\n    },\r\n\r\n    toggleEditMode(){\r\n      this.isEditMode = !this.isEditMode;\r\n    },\r\n    openProductList(index) {\r\n      this.selectedSlot = index;\r\n    },\r\n    addToSlot({product, slot}){\r\n      this.favoriteProducts[slot] = product;\r\n    },\r\n    removeProductFromFavorites(index) {\r\n      this.favoriteProducts[index] = null;\r\n    },\r\n\r\n    addCustomer() {\r\n      // Lógica para agregar un cliente\r\n    },\r\n\r\n    addProductToCart(product) {\r\n      const existingItem = this.cart.find(item => item.id === product.id);\r\n      if (existingItem) {\r\n        existingItem.quantity += 1;\r\n      } else {\r\n        this.cart.push({ ...product, price: product.productPrice, quantity: 1 });\r\n      }\r\n      this.updateCartSummary();\r\n    },\r\n    updateCartSummary() {\r\n      console.log(this.cart)\r\n      this.subtotal = this.cart.reduce((acc, item) => acc + item.price * item.quantity, 0);\r\n      this.igv = this.subtotal * 0.18; // Calcular IGV (18%)\r\n      this.total = this.subtotal;\r\n    },\r\n    handleUpdateCart(updatedCart) {\r\n      this.cart = updatedCart;\r\n      console.log(\"Updated cart recibirdo:\", updatedCart)\r\n    },\r\n    handleUpdateSummary({ subtotal, igv, total }) {\r\n      this.subtotal = subtotal;\r\n      this.igv = igv;\r\n      this.total = total;\r\n    },\r\n    handleAccountUpdated(){\r\n\r\n    },\r\n    charge() {\r\n      // Lógica para procesar el cobro\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.layout {\r\n  display: flex;\r\n  height: 100vh;\r\n  background-color: #F6F5FA\r\n}\r\n.main-content {\r\n  margin-left: 255px; /* Desplaza el contenido a la derecha del sidebar */\r\n  width: calc(100% - 280px); /* Ajusta el ancho para ocupar el resto de la pantalla */\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.page-container {\r\n  margin-top: 70px; /* Desplaza el contenido principal por debajo del header */\r\n  padding: 20px;\r\n  background-color: #F6F5FA; /* Fondo blanco para la zona de contenido */\r\n  height: calc(100vh - 100px); /* Ajusta el alto para evitar desbordamientos */\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n\r\nfavorite-product-header-component {\r\n  display: flex;\r\n  justify-content: space-between; /* Alinea la barra de búsqueda y el botón de edición */\r\n  margin-bottom: 20px; /* Separación entre el header y la cuadrícula de productos */\r\n}\r\n\r\n.left-section {\r\n  flex: 3; /* Hacer que la cuadrícula ocupe más espacio */\r\n\r\n}\r\n.right-section {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between; /* Para evitar la compresión vertical */\r\n  min-width: 350px;\r\n  min-height: 690px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}