{"ast":null,"code":"import HeaderComponent from \"@/admins/components/header-component.vue\";\nimport SidebarComponent from \"@/admins/components/sidebar-component.vue\";\nimport userService from \"@/public/services/userService\";\nimport SearchbarComponent from \"@/admins/views/saved-accounts-views/components/searchbar-component.vue\";\nimport TablesComponent from \"@/admins/views/saved-accounts-views/components/tables-component.vue\";\nimport TableConfigComponent from \"@/admins/views/saved-accounts-views/components/table-config-component.vue\";\nimport { tablesService } from \"@/public/services/tablesService\";\nexport default {\n  components: {\n    TablesComponent,\n    SearchbarComponent,\n    HeaderComponent,\n    SidebarComponent,\n    TableConfigComponent\n  },\n  data() {\n    return {\n      restaurantName: '',\n      userRole: '',\n      tables: [],\n      showModal: false\n    };\n  },\n  beforeMount() {\n    this.fetchUserData();\n    const userData = JSON.parse(localStorage.getItem('userData'));\n    if (userData) {\n      this.restaurantName = userData['business-name'];\n      this.userRole = userData.role;\n      this.restaurantId = localStorage.getItem('restaurantId'); // Obtener el ID del restaurante de localStorage\n    }\n    this.loadTables();\n  },\n  methods: {\n    async fetchUserData() {\n      try {\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\n        const restaurantId = userData?.restaurantId;\n        if (restaurantId) {\n          const restaurantData = await userService.getRestaurantById(restaurantId);\n          this.restaurantName = restaurantData.name;\n          this.userRole = userData.role;\n        }\n      } catch (error) {\n        console.error(\"Error fetching restaurant data: \", error);\n      }\n    },\n    async loadTables() {\n      const userData = JSON.parse(localStorage.getItem('userData'));\n      const restaurantId = userData.restaurantId;\n      try {\n        const tables = await tablesService.getTablesByRestaurant(restaurantId);\n        this.tables = tables;\n        console.log(tables);\n      } catch (error) {\n        console.error(\"Failed to load tables\");\n      }\n    },\n    async deleteTable(tableId) {\n      if (confirm(\"Are you sure you want to delete this table?\")) {\n        try {\n          const response = await tablesService.deleteTable(tableId);\n          console.log(response);\n          await this.loadTables();\n        } catch (error) {\n          console.error('Error during table deletion process:', error);\n        }\n      } else {\n        console.log(\"Deletion canceled.\");\n      }\n    },\n    async addTable(tableData) {\n      try {\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\n        const restaurantId = userData?.restaurantId;\n        const table = {\n          tableNumber: tableData.tableNumber,\n          tableCapacity: tableData.tableCapacity,\n          tableGuests: 0,\n          tableStatus: 0,\n          restaurantId: restaurantId\n        };\n        const response = await tablesService.addTable(table);\n        if (response) {\n          this.closeModal();\n          await this.loadTables();\n        } else {\n          console.error(\"Failed to add table\");\n        }\n      } catch (error) {\n        console.error(\"Failed to add table\", error);\n      }\n    },\n    closeModal() {\n      this.showModal = false;\n    }\n  }\n};","map":{"version":3,"names":["HeaderComponent","SidebarComponent","userService","SearchbarComponent","TablesComponent","TableConfigComponent","tablesService","components","data","restaurantName","userRole","tables","showModal","beforeMount","fetchUserData","userData","JSON","parse","localStorage","getItem","role","restaurantId","loadTables","methods","restaurantData","getRestaurantById","name","error","console","getTablesByRestaurant","log","deleteTable","tableId","confirm","response","addTable","tableData","table","tableNumber","tableCapacity","tableGuests","tableStatus","closeModal"],"sources":["E:\\kitchen-tech-repo\\src\\admins\\views\\saved-accounts-views\\tables-page.vue"],"sourcesContent":["<template>\r\n  <div class=\"layout\">\r\n    <sidebar-component :restaurant-name=\"restaurantName\" :role=\"userRole\" class=\"sidebar\" />\r\n    <div class=\"main-content\">\r\n      <header-component :restaurant-name=\"restaurantName\" :role=\"userRole\" class=\"header\" />\r\n      <div class=\"page-container\">\r\n        <searchbar-component\r\n            v-if=\"restaurantName\"\r\n            :restaurant-name=\"restaurantName\"\r\n            :user-role=\"userRole\"\r\n        />\r\n        <TableConfigComponent\r\n            :is-visible=\"showModal\"\r\n            @save-table=\"addTable\"\r\n            @close-modal=\"closeModal\"\r\n        />\r\n        <div class=\"tables-container\">\r\n          <div class=\"left-section\">\r\n            <template v-if=\"tables.length === 0\">\r\n              <div class=\"no-accounts\">\r\n                <label>You don't have created any table yet.</label>\r\n              </div>\r\n            </template>\r\n            <template v-else-if=\"tables.length !== 0\">\r\n              <TablesComponent\r\n                  v-for=\"table in tables\"\r\n                  :key=\"table.id\"\r\n                  :table=\"table\"\r\n                  @select-table=\"loadTableProducts\"\r\n                  @delete-table=\"deleteTable\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div class=\"right-section\">\r\n            <button class=\"button\" @click=\"showModal = true \">Add Table</button>\r\n            <button class=\"button\">Edit Table</button>\r\n            <div class=\"bullets\">\r\n              <div class=\"bullet green\" aria-label=\"Table status\">\r\n                <p class=\"description-bullet\">Free</p>\r\n              </div>\r\n              <div class=\"bullet red\" aria-label=\"Table status\">\r\n                <p class=\"description-bullet\">Occupied</p>\r\n              </div>\r\n              <div class=\"bullet yellow\" aria-label=\"Table status\">\r\n                <p class=\"description-bullet\">To Clean</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HeaderComponent from \"@/admins/components/header-component.vue\";\r\nimport SidebarComponent from \"@/admins/components/sidebar-component.vue\";\r\nimport userService from \"@/public/services/userService\";\r\nimport SearchbarComponent from \"@/admins/views/saved-accounts-views/components/searchbar-component.vue\";\r\nimport TablesComponent from \"@/admins/views/saved-accounts-views/components/tables-component.vue\";\r\nimport TableConfigComponent from \"@/admins/views/saved-accounts-views/components/table-config-component.vue\";\r\nimport {tablesService} from \"@/public/services/tablesService\";\r\n\r\nexport default {\r\n  components: {\r\n    TablesComponent,\r\n    SearchbarComponent,\r\n    HeaderComponent,\r\n    SidebarComponent,\r\n    TableConfigComponent\r\n  },\r\n  data() {\r\n    return {\r\n      restaurantName: '',\r\n      userRole: '',\r\n      tables: [],\r\n      showModal: false,\r\n    };\r\n  },\r\n  beforeMount() {\r\n    this.fetchUserData();\r\n\r\n    const userData = JSON.parse(localStorage.getItem('userData'));\r\n    if (userData) {\r\n      this.restaurantName = userData['business-name'];\r\n      this.userRole = userData.role;\r\n      this.restaurantId = localStorage.getItem('restaurantId'); // Obtener el ID del restaurante de localStorage\r\n    }\r\n\r\n    this.loadTables();\r\n  },\r\n  methods: {\r\n    async fetchUserData() {\r\n      try {\r\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n        const restaurantId = userData?.restaurantId;\r\n\r\n        if (restaurantId) {\r\n          const restaurantData = await userService.getRestaurantById(restaurantId);\r\n          this.restaurantName = restaurantData.name;\r\n          this.userRole = userData.role;\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching restaurant data: \", error);\r\n      }\r\n    },\r\n    async loadTables() {\r\n      const userData = JSON.parse(localStorage.getItem('userData'));\r\n      const restaurantId = userData.restaurantId;\r\n\r\n      try {\r\n        const tables = await tablesService.getTablesByRestaurant(restaurantId);\r\n        this.tables = tables;\r\n        console.log(tables)\r\n      } catch (error) {\r\n        console.error(\"Failed to load tables\");\r\n      }\r\n    },\r\n    async deleteTable(tableId) {\r\n      if(confirm(\"Are you sure you want to delete this table?\")) {\r\n        try {\r\n          const response = await tablesService.deleteTable(tableId);\r\n          console.log(response)\r\n          await this.loadTables();\r\n        } catch (error){\r\n          console.error('Error during table deletion process:', error);\r\n        }\r\n      } else {\r\n        console.log(\"Deletion canceled.\");\r\n      }\r\n    },\r\n    async addTable(tableData) {\r\n      try {\r\n        const userData = JSON.parse(localStorage.getItem(\"userData\"));\r\n        const restaurantId = userData?.restaurantId;\r\n\r\n        const table = {\r\n          tableNumber: tableData.tableNumber,\r\n          tableCapacity: tableData.tableCapacity,\r\n          tableGuests: 0,\r\n          tableStatus: 0,\r\n          restaurantId: restaurantId,\r\n        };\r\n        const response = await tablesService.addTable(table);\r\n        if (response) {\r\n          this.closeModal();\r\n          await this.loadTables();\r\n        } else {\r\n          console.error(\"Failed to add table\");\r\n        }\r\n      }catch (error) {\r\n        console.error(\"Failed to add table\", error);\r\n      }\r\n    },\r\n    closeModal(){\r\n      this.showModal = false;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.layout {\r\n  display: flex;\r\n  height: 100vh;\r\n  background-color: #F6F5FA;\r\n}\r\n.main-content {\r\n  margin-left: 255px;\r\n  width: calc(100% - 280px);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.page-container {\r\n  margin-top: 70px;\r\n  padding: 20px;\r\n  background-color: #F6F5FA;\r\n  height: calc(100vh - 100px);\r\n  font-family: 'Red Hat Display', sans-serif;\r\n}\r\n\r\n.tables-container{\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin: auto;\r\n  justify-content: center;\r\n}\r\n.left-section {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  max-height: 100px;\r\n  margin: 20px 10px;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\r\n}\r\n\r\n.right-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 25px 10px;\r\n  min-width: 120px;\r\n  min-height: 690px;\r\n}\r\n.button {\r\n  background-color: #D3D2E5;\r\n  color: #31304A;\r\n  border: none;\r\n  margin: 5px;\r\n  padding: 10px;\r\n  max-width: 120px;\r\n  font-weight: 800;\r\n  border-radius: 5px;\r\n}\r\n.button:hover {\r\n  background-color: #31304A;\r\n  color: #F6F5FA;\r\n  transition: 0.3s;\r\n  cursor: pointer;\r\n}\r\n.button:active{\r\n  background-color: #201E35;\r\n  color: #F6F5FA;\r\n}\r\n\r\n.bullets{\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 10px;\r\n}\r\n.description-bullet{\r\n  margin-left: 15px;\r\n  margin-top: 0;\r\n  text-overflow: clip;\r\n  white-space: nowrap;\r\n}\r\n\r\n.bullet{\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  font-size: 0.6rem;\r\n  margin-top: 15px;\r\n}\r\n.red {\r\n  background-color: #d34f4d;\r\n}\r\n.green {\r\n  background-color: #59aa64;\r\n}\r\n.yellow{\r\n  background-color: #cfa553;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}